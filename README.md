# Лабораторная работа 1-2
## Разработка структуры БД
### Цели работы
Познакомиться с основами проектирования схемы БД, языком описания сущностей и ограничений БД SQL-DDL.

### Программа работы
1. Самостоятельное изучение SQL-DDL.
2. Создание скрипта БД в соответствии с согласованной схемой. Должны присутствовать первичные и внешние ключи, ограничения на диапазоны значений. Демонстрация скрипта преподавателю.
3. Создание скрипта, заполняющего все таблицы БД данными.
4. Выполнение SQL-запросов, изменяющих схему созданной БД по заданию преподавателя. Демонстрация их работы преподавателю.

### Ход работы

**Создание проекта для работы в GitLab**

Репозиторий проекта: https://gitlab.icc.spbstu.ru/rejmer.id/db-course <br>
В ветке lab1-2 находятся все файлы по лабораторной работе 1-2.

**Создание скрипта БД в соответствии с согласованной схемой** 
 
Для работы с БД будем использовать терминальный интерфейс psql для взаимодействия с PostgreSQL.

Cоздадим скрипт БД в соответствии с даталогической моделью. В нем присутствуют первичные и внешние ключи, ограничения на диапазоны значений.
При выполнении скрипта удаляется (при существовании) и создается БД lab1_reymer, в которой создаются описанные в lab1-1 таблицы.

[script1](https://gitlab.icc.spbstu.ru/rejmer.id/db-course/-/blob/lab1-2/script1.sql)

**Создание скрипта, заполняющего все таблицы БД данными**

Создадим скрипт, заполняющий все таблицы БД данными. Данные прописаны вручную, соблюдены все требуемые ограничения значений.

[script2](https://gitlab.icc.spbstu.ru/rejmer.id/db-course/-/blob/lab1-2/script2.sql)

**Индивидуальное задание**

Необходимо написать SQL-скрипт, добавляющий в базу данных таблицу акций. Принцип работы акций – получение некоторой скидки при покупке одной, двух или трех игр (в одном заказе). Соответственно, нужно хранить информацию об акционных играх и величину скидки в процентах.

Дополним даталогическую модель БД:

![model](http://gitlab.icc.spbstu.ru/rejmer.id/db-course/-/raw/lab1-2/%D0%94%D0%B0%D1%82%D0%B0%D0%BB%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F_%D0%BC%D0%BE%D0%B4%D0%B5%D0%BB%D1%8C_%D0%91%D0%94_%D1%81_%D0%98%D0%97.jpg)

Будем определять акции через коммерческую информацию об игре.
- К каждой коммерческой информации об игре **(commerce)** может относиться несколько акций - **sale** (например, идет акция_1, которая началась неделю назад, акция_2 началась сегодня и акция_3, которая начнется через месяц), а может и не относиться вовсе. 
- К каждой акции может относиться несколько коммерческих информаций. Акция без коммерческой информации об игре не может существовать.
- Дата начала акции **(start)** не должна превосходить дату окончания акции **(finish)**.
- Процент скидки **(discount)** должен быть больше 0 и меньше или равен 100. 

Скрипты 1 и 2 были дополнены таблицами и данными об акциях в соответствии с описанными ограничениями. 

### Вывод

В ходе выполнения лабораторной работы 1-2 проведено самостоятельное изучение SQL-DDL и созданы 2 скрипта для создания таблиц и заполения их данными в соответствии с согласованной схемой. Выполнено индивидуальное задание - скрипты дополнены таблицами и данными об акциях.

